<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <script id="allmobilize" charset="utf-8" th:src="@{static/js/allmobilize.min.js}"></script>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="alternate" media="handheld"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>无限创想人才招聘平台</title>
    <script type="text/javascript">
        var ctx = "h";
        console.log(1);
    </script>
    <link rel="Shortcut Icon" href="h/images/favicon.ico">
    <link rel="stylesheet" type="text/css" th:href="@{static/css/style.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/external.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/popup.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/index.css}"/>
    <script type="text/javascript" th:src="@{static/js/jquery.1.10.1.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/ajaxfileupload.js}"></script>
    <script type="text/javascript" th:src="@{static/js/additional-methods.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/excanvas.js}"></script>
    <script type="text/javascript">
        var youdao_conv_id = 271546;
    </script>
    <script type="text/javascript" th:src="@{static/js/conv.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.1.10.1.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/core.min.js}"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/sweetalert/1.1.2/sweetalert.min.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/sweetalert/1.1.2/sweetalert.min.js"></script>
</head>

<body onkeydown="keyLogin()">
<main>
    <div class="login_box_btm"></div>
    <div id="overlay"></div>
    <ul id="scene">
        <li class="layer" data-depth="0.1">
            <div class="layer1"></div>
        </li>
        <li class="layer" data-depth="0.2">
            <div class="layer2"></div>
        </li>
    </ul>
    <div class="register_wrapper">
        <div class="login_header">
            <a href="home"><img th:src="@{static/img/logo_white.png}" width="285" height="62" alt="无限创想"/></a>
            <div id="cloud_s"><img th:src="@{static/img/cloud_s.png}" width="81" height="52" alt="cloud"/></div>
            <div id="cloud_m"><img th:src="@{static/img/cloud_m.png}" width="136" height="95" alt="cloud"/></div>
        </div>
        <div id="body1">
            <div id="container">
                <div class="clearfix">
                    <div class="content_l">
                        <h1 style="color:#f5a140;"><img th:src="@{static/img/register_ico.png}"
                                                        style="width:40px; padding-right:20px;">我的个人信息</h1>
                        <form id="subForm">
                            <input type="hidden" value="" name="id" id="orderId"/>
                            <div class="s_form">
                                <p>欢迎你！完善下方的个人信息，无限创想帮你挑工作！</p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_uname.png}" style="width:30px;">
                                    姓名：（必填）</h3><input type="text" style="width:600px;" id="subUserName" name="UserName"
                                                       placeholder="请输入真实姓名" value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_sex.png}" style="width:30px;">
                                    性别：（必填）
                                <ul class="sex_radio clearfix">
                                    <li>
                                        男
                                        <input type="radio" value="男" name="Sex"/>
                                    </li>
                                    <li>
                                        女
                                        <input type="radio" value="女" name="Sex"/>
                                    </li>
                                </ul>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_nickname.png}" style="width:30px;">
                                    昵称：（必填）<input type="text" id="subNickName" name="NickName" placeholder="请输入昵称"
                                                  value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_birth.png}" style="width:30px;">
                                    出生日期：（必填）<input type="date" id="subBirth" name="Birth" placeholder="请选择出生年月日"
                                                    value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_phone.png}" style="width:30px;">
                                    联系电话：（必填）<input type="text" id="subUserPhone" name="UserPhone" placeholder="请输入联系电话"
                                                    value=""/>
                                </p>
                                <a class="btn_big" id="subSubmit" title="提 交" onclick="javascript:return formCheck()">提 交</a>
                                <a href="javascript:history.go(-1);" class="btn_cancel" style="float: right;margin-left:0;margin-right: 50px;">取 消</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
    <script th:src="@{static/js/jquery.parallax.min.js}"></script>
    <script>
        $(document).ready(function () {
            $('#scene').parallax();
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function (e) {
            $('.sex_radio li input').click(function (e) {
                $(this).parent('li').addClass('current').append('<em></em>').siblings().removeClass('current').find('em').remove();
            });
        });

        $("#subBirth").change(function(){
            $("#subBirth").attr("value",$(this).val());
        });

        function keyLogin(){
            if (event.keyCode === 13){
                document.getElementById("subSubmit").click();
            }
        };

        function formCheck() {
            var UserName = document.getElementById('subUserName').value;
            var Sex = document.getElementsByName('Sex');
            var NickName = document.getElementById('subNickName').value;
            var Birth = document.getElementById('subBirth').value;
            var UserPhone = document.getElementById('subUserPhone').value;
            if (UserName === ""){
                swal({
                    title: "姓名不能为空",
                    text: "请输入用户真实姓名",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (UserName.indexOf(" ") !== -1){
                swal({
                    title: "姓名不能含空格",
                    text: "请输入正确的用户姓名",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            var flag = false;
            for (var i = 0; i < Sex.length; i++) {
                if (Sex[i].checked) {
                    flag = true;
                }
            }
            if(flag === false){
                swal({
                    title: "未选择性别",
                    text: "请选择用户性别：男/女",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (NickName === ""){
                swal({
                    title: "昵称不能为空",
                    text: "请输入用户昵称",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (NickName.indexOf(" ") !== -1){
                swal({
                    title: "昵称不能含空格",
                    text: "请输入正确的用户昵称",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (Birth === ""){
                swal({
                    title: "出生日期不能为空",
                    text: "请选择用户出生年月日",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (UserPhone === ""){
                swal({
                    title: "联系电话不能为空",
                    text: "请输入联系电话",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (UserPhone.search(/^1[3456789]\d{9}$/) === -1){
                swal({
                    title: "联系电话格式错误",
                    text: "联系电话必须是以1开头，第二位为3~9的11位数字串",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            return true;
        }
    </script>
    <script type="text/javascript">
        $("#subSubmit").click(function () {
            if(formCheck() === true){
                var UserName = $("#subUserName").val();
                var Sex = $('input[name="Sex"]:checked').val();
                var NickName = $("#subNickName").val();
                var Birth = $("#subBirth").val();
                var UserPhone = $("#subUserPhone").val();
                var url = "touserRegisterInfo";
                var data = {
                    UserName: UserName,
                    Sex: Sex,
                    NickName: NickName,
                    Birth: Birth,
                    UserPhone: UserPhone
                }
                $.post(url, data, function (result) {
                    if(result != null && result.code === 200){
                        window.location.href="home";
                    }
                    else {
                        swal({
                            title: "提交失败",
                            text: "请确认输入内容并重试",
                            type: "error",
                            confirmButtonColor: "#011d56"
                        });
                    }
                })
            }
        })
    </script>
</main>
</body>
</html>