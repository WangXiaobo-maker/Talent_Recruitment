<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <script id="allmobilize" charset="utf-8" th:src="@{static/js/allmobilize.min.js}"></script>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="alternate" media="handheld"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>无限创想人才招聘平台</title>
    <script type="text/javascript">
        var ctx = "h";
    </script>
    <link rel="shortcut icon" th:href="@{static/img/html.ico}" type="image/x-icon"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/style.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/external.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/popup.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{static/css/index.css}"/>
    <script type="text/javascript" th:src="@{static/js/jquery.1.10.1.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/ajaxfileupload.js}"></script>
    <script type="text/javascript" th:src="@{static/js/additional-methods.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/excanvas.js}"></script>
    <script type="text/javascript">
        var youdao_conv_id = 271546;
    </script>
    <script type="text/javascript" th:src="@{static/js/conv.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.1.10.1.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/jquery.lib.min.js}"></script>
    <script type="text/javascript" th:src="@{static/js/core.min.js}"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/sweetalert/1.1.2/sweetalert.min.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/sweetalert/1.1.2/sweetalert.min.js"></script>
</head>

<body onkeydown="keyLogin()">
<main>
    <div class="login_box_btm"></div>
    <div id="overlay"></div>
    <ul id="scene">
        <li class="layer" data-depth="0.1">
            <div class="layer1"></div>
        </li>
        <li class="layer" data-depth="0.2">
            <div class="layer2"></div>
        </li>
    </ul>
    <div class="register_wrapper">
        <div class="login_header">
            <a href="home"><img th:src="@{static/img/logo_white.png}" width="285" height="62" alt="无限创想"/></a>
            <div id="cloud_s"><img th:src="@{static/img/cloud_s.png}" width="81" height="52" alt="cloud"/></div>
            <div id="cloud_m"><img th:src="@{static/img/cloud_m.png}" width="136" height="95" alt="cloud"/></div>
        </div>
        <div id="body1">
            <div id="container">
                <div class="clearfix">
                    <div class="content_l">
                        <h1 style="color:#f5a140;"><img th:src="@{static/img/register_ico.png}"
                                                        style="width:40px; padding-right:20px;">企业信息</h1>
                        <form id="subForm">
                            <input type="hidden" value="" name="id" id="orderId"/>
                            <div class="s_form">
                                <p>欢迎你！完善下方的企业信息，无限创想帮你找好员工！</p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_company.png}" style="width:30px;">
                                    <font style="font-weight: bold;">公司名称：（必填）</font>
                                    <input type="text" style="width:600px;" id="subCompanyName" name="CompanyName"
                                           placeholder="请输入公司名称" value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_phone.png}" style="width:30px;">
                                    <font style="font-weight: bold;">联系电话：（必填）</font>
                                    <input type="text" style="width:600px;" id="subCompanyPhone" name="CompanyPhone"
                                           placeholder="请输入联系电话" value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_mail.png}" style="width:30px;">
                                    <font style="font-weight: bold;">注册法人：（必填）</font>
                                    <input type="text" style="width:600px;" id="subCompanyLegalPerson" name="CompanyLegalPerson"
                                           placeholder="请输入法人姓名" value=""/>
                                </p>
                                <p style="font-size:20px;"><img th:src="@{static/img/register_add.png}" style="width:30px;">
                                    <font style="font-weight: bold;">公司地址：（必填）</font>
                                    <input type="text" style="width:600px;" id="subCompanyAddress" name="CompanyAddress"
                                           placeholder="请输入具体地址" value=""/>
                                </p>
                                <a href="javascript:history.go(-1);" class="btn_cancel">取 消</a>
                                <a class="btn_big" id="subSubmit" title="提 交" onclick="javascript:return formCheck()" style="float: right;margin-left:0;margin-right: 60px;">下 一 步</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{static/js/mouse-click.js}"></script>
    <canvas width="100%" height="100%"
            style="position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;"></canvas>

    <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
    <script th:src="@{static/js/jquery.parallax.min.js}"></script>
    <script>
        $(document).ready(function () {
            $('#scene').parallax();
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function (e) {
            $('.sex_radio li input').click(function (e) {
                $(this).parent('li').addClass('current').append('<em></em>').siblings().removeClass('current').find('em').remove();
            });
        });

        function keyLogin(){
            if (event.keyCode === 13){
                document.getElementById("subSubmit").click();
            }
        };

        function formCheck() {
            var CompanyName = document.getElementById('subCompanyName').value;
            var CompanyPhone = document.getElementById('subCompanyPhone').value;
            var CompanyLegalPerson = document.getElementById('subCompanyLegalPerson').value;
            var CompanyAddress = document.getElementById('subCompanyAddress').value;
            if (CompanyName === ""){
                swal({
                    title: "公司名称不能为空",
                    text: "请输入公司名称",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyName.indexOf(" ") !== -1){
                swal({
                    title: "公司名称不能含空格",
                    text: "请输入正确的公司名称",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyPhone === ""){
                swal({
                    title: "联系电话不能为空",
                    text: "请输入联系电话",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyPhone.search(/^1[3456789]\d{9}$/) === -1){
                swal({
                    title: "联系电话格式错误",
                    text: "联系电话必须是以1开头，第二位为3~9的11位数字串",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyLegalPerson === ""){
                swal({
                    title: "注册法人不能为空",
                    text: "请输入注册法人姓名",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyLegalPerson.indexOf(" ") !== -1){
                swal({
                    title: "注册法人姓名不能含空格",
                    text: "请输入正确的注册法人姓名",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyAddress === ""){
                swal({
                    title: "公司地址不能为空",
                    text: "请输入公司具体地址",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            if (CompanyAddress.trim().length === 0){
                swal({
                    title: "公司地址不能全部为空格",
                    text: "请输入正确的公司具体地址",
                    type: "error",
                    confirmButtonColor: "#011d56"
                });
                return false;
            }
            return true;
        }
    </script>
    <script type="text/javascript">
        $("#subSubmit").click(function () {
            if(formCheck() === true){
                var CompanyName = $("#subCompanyName").val();
                var CompanyPhone = $("#subCompanyPhone").val();
                var CompanyLegalPerson = $("#subCompanyLegalPerson").val();
                var CompanyAddress = $("#subCompanyAddress").val();
                var url = "tocompanyRegisterInfo";
                var data = {
                    CompanyName: CompanyName,
                    CompanyPhone: CompanyPhone,
                    CompanyLegalPerson: CompanyLegalPerson,
                    CompanyAddress: CompanyAddress
                }
                $.post(url, data, function (result) {
                    if(result != null && result.code === 200){
                        window.location.href="companyRegisterInfo2";
                    }
                    else if(result != null && result.code === 0){
                        swal({
                            title: "该公司已被注册",
                            text: "该公司已被注册，请使用其他公司名称",
                            type: "error",
                            confirmButtonColor: "#011d56"
                        });
                    }
                    else {
                        swal({
                            title: "提交失败",
                            text: "请确认输入内容并重试",
                            type: "error",
                            confirmButtonColor: "#011d56"
                        });
                    }
                })
            }
        })
    </script>
</main>
</body>
</html>